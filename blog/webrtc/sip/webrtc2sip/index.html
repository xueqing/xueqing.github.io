<!DOCTYPE html>
<html lang="zh-Hans">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.5.0">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="kiki">

  
  
  
    
  
  <meta name="description" content="1 术语 2 webrtc2sip 架构 3 webrtc2sip 配置 4 编译源码 4.1 编译 Doubango IMS Framework 4.1.1 编译 libsrtp 4.1.2 编译 OpenSSL 4.1.3 编译 libspeex 和 libspeexdsp 4.1.4 编译 YASM 4.1.5 编译 libvpx 4.1.6 编译 linyuv 4.1.7 编译 opencore-amr 4.1.8 编译 libopus 4.1.9 编译 libgsm 4.1.10 编译 g729 4.1.11 编译 iLBC 4.1.12 编">

  
  <link rel="alternate" hreflang="zh-Hans" href="https://xueqing.github.io/blog/webrtc/sip/webrtc2sip/">

  


  
  
  
  <meta name="theme-color" content="#ff3860">
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    

    

  

  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CRoboto:400,400italic,700%7CRoboto+Mono&display=swap">
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  




  


  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon-32.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="https://xueqing.github.io/blog/webrtc/sip/webrtc2sip/">

  
  
  
  
    
    
  
  
  <meta property="twitter:card" content="summary">
  
  <meta property="og:site_name" content="kiki">
  <meta property="og:url" content="https://xueqing.github.io/blog/webrtc/sip/webrtc2sip/">
  <meta property="og:title" content="webrtc2sip | kiki">
  <meta property="og:description" content="1 术语 2 webrtc2sip 架构 3 webrtc2sip 配置 4 编译源码 4.1 编译 Doubango IMS Framework 4.1.1 编译 libsrtp 4.1.2 编译 OpenSSL 4.1.3 编译 libspeex 和 libspeexdsp 4.1.4 编译 YASM 4.1.5 编译 libvpx 4.1.6 编译 linyuv 4.1.7 编译 opencore-amr 4.1.8 编译 libopus 4.1.9 编译 libgsm 4.1.10 编译 g729 4.1.11 编译 iLBC 4.1.12 编"><meta property="og:image" content="https://xueqing.github.io/img/icon-192.png">
  <meta property="twitter:image" content="https://xueqing.github.io/img/icon-192.png"><meta property="og:locale" content="zh-Hans">
  
    
    
  

  



  


  


  





  <title>webrtc2sip | kiki</title>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>搜索</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="搜索..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  
<nav class="navbar navbar-light fixed-top navbar-expand-lg py-0 compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
      <a class="navbar-brand" href="/">kiki</a>
      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="切换导航">
        <span><i class="fas fa-bars"></i></span>
      </button>
      

    
    <div class="collapse navbar-collapse" id="navbar">

      
      
      <ul class="navbar-nav mr-auto">
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#about"><span>主页</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link  active" href="/blog/"><span>博客</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/translation/"><span>翻译</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/reading/"><span>阅读</span></a>
        </li>

        
        

      
      </ul>
      <ul class="navbar-nav ml-auto">
      

        

        
        <li class="nav-item">
          <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        

        
        <li class="nav-item">
          <a class="nav-link js-dark-toggle" href="#"><i class="fas fa-moon" aria-hidden="true"></i></a>
        </li>
        

      </ul>

    </div>
  </div>
</nav>


  <article class="article">

  












  

  
  
  
<div class="article-container pt-3">
  <h1>webrtc2sip</h1>

  

  
    


<div class="article-metadata">

  
  
  
  
  <div>
    



  
  <span><a href="/authors/kiki/">kiki</a></span>

  </div>
  
  

  
  <span class="article-date">
    
    
      
    
    Jan 1, 0001
  </span>
  

  

  

  
  
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="/categories/blog/">blog</a></span>
  

</div>

    














  
</div>



  <div class="article-container">

    <div class="article-style">
      

<ul>
<li><a href="#1-%e6%9c%af%e8%af%ad">1 术语</a></li>
<li><a href="#2-webrtc2sip-%e6%9e%b6%e6%9e%84">2 webrtc2sip 架构</a></li>
<li><a href="#3-webrtc2sip-%e9%85%8d%e7%bd%ae">3 webrtc2sip 配置</a></li>
<li><a href="#4-%e7%bc%96%e8%af%91%e6%ba%90%e7%a0%81">4 编译源码</a>

<ul>
<li><a href="#41-%e7%bc%96%e8%af%91-doubango-ims-framework">4.1 编译 Doubango IMS Framework</a></li>
<li><a href="#411-%e7%bc%96%e8%af%91-libsrtp">4.1.1 编译 libsrtp</a></li>
<li><a href="#412-%e7%bc%96%e8%af%91-openssl">4.1.2 编译 OpenSSL</a></li>
<li><a href="#413-%e7%bc%96%e8%af%91-libspeex-%e5%92%8c-libspeexdsp">4.1.3 编译 libspeex 和 libspeexdsp</a></li>
<li><a href="#414-%e7%bc%96%e8%af%91-yasm">4.1.4 编译 YASM</a></li>
<li><a href="#415-%e7%bc%96%e8%af%91-libvpx">4.1.5 编译 libvpx</a></li>
<li><a href="#416-%e7%bc%96%e8%af%91-linyuv">4.1.6 编译 linyuv</a></li>
<li><a href="#417-%e7%bc%96%e8%af%91-opencore-amr">4.1.7 编译 opencore-amr</a></li>
<li><a href="#418-%e7%bc%96%e8%af%91-libopus">4.1.8 编译 libopus</a></li>
<li><a href="#419-%e7%bc%96%e8%af%91-libgsm">4.1.9 编译 libgsm</a></li>
<li><a href="#4110-%e7%bc%96%e8%af%91-g729">4.1.10 编译 g729</a></li>
<li><a href="#4111-%e7%bc%96%e8%af%91-ilbc">4.1.11 编译 iLBC</a></li>
<li><a href="#4112-%e7%bc%96%e8%af%91-x264">4.1.12 编译 x264</a></li>
<li><a href="#4113-%e7%bc%96%e8%af%91-ffmpeg">4.1.13 编译 FFMpeg</a></li>
<li><a href="#4114-%e7%bc%96%e8%af%91-doubango">4.1.14 编译 Doubango</a></li>
<li><a href="#42-%e7%bc%96%e8%af%91-webrtc2sip-%e5%92%8c%e7%ac%ac%e4%b8%89%e6%96%b9%e5%ba%93">4.2 编译 webrtc2sip 和第三方库</a></li>
<li><a href="#43-%e8%bf%90%e8%a1%8c-webrtc2sip">4.3 运行 webrtc2sip</a></li>
</ul></li>
<li><a href="#5-%e6%b5%8b%e8%af%95%e7%bd%91%e5%85%b3">5 测试网关</a>

<ul>
<li><a href="#51-%e6%9c%ac%e5%9c%b0%e6%b5%8b%e8%af%95-sipml5-%e5%92%8c-webrtc2sip">5.1 本地测试 sipML5 和 webrtc2sip</a></li>
</ul></li>
<li><a href="#6-%e4%ba%92%e6%93%8d%e4%bd%9c%e6%80%a7">6 互操作性</a>

<ul>
<li><a href="#61-%e5%85%b3%e4%ba%8e%e6%9c%8d%e5%8a%a1">6.1 关于服务</a></li>
<li><a href="#611-asterisk">6.1.1 Asterisk</a></li>
<li><a href="#612-freeswitch">6.1.2 FreeSwitch</a></li>
<li><a href="#62-%e5%85%b3%e4%ba%8e-web-%e6%b5%8f%e8%a7%88%e5%99%a8">6.2 关于 web 浏览器</a></li>
<li><a href="#621-chrome">6.2.1 Chrome</a></li>
<li><a href="#622-firefox-nightly">6.2.2 Firefox Nightly</a></li>
<li><a href="#623-firefoxsafariie-%e5%92%8c-opera">6.2.3 Firefox，Safari，IE 和 Opera</a></li>
<li><a href="#624-ericsson-bowser">6.2.4 Ericsson Bowser</a></li>
</ul></li>
<li><a href="#7-%e5%ae%89%e5%85%a8%e9%97%ae%e9%a2%98">7 安全问题</a></li>
<li><a href="#8-%e4%b8%80%e4%ba%9b%e7%bc%96%e8%af%91%e9%97%ae%e9%a2%98">8 一些编译问题</a>

<ul>
<li><a href="#81-webrtc2sip-%e7%bc%96%e8%af%91%e5%87%ba%e9%94%99">8.1 webrtc2sip 编译出错</a></li>
<li><a href="#82-%e8%a7%86%e9%a2%91%e7%bc%96%e8%a7%a3%e7%a0%81%e5%b4%a9%e6%ba%83">8.2 视频编解码崩溃</a></li>
<li><a href="#83-webrtc2sip-%e9%a1%b9%e7%9b%ae%e9%85%8d%e7%bd%ae">8.3 webrtc2sip 项目配置</a></li>
<li><a href="#84-%e5%85%b3%e4%ba%8e-sipml5-%e6%9c%8d%e5%8a%a1">8.4 关于 sipML5 服务</a></li>
<li><a href="#841-webrtc2sip-%e8%a7%a3%e6%9e%90-sipml5-%e8%af%b7%e6%b1%82%e5%a4%b1%e8%b4%a5">8.4.1 webrtc2sip 解析 sipML5 请求失败</a></li>
<li><a href="#85-%e5%85%b3%e4%ba%8e-chrome-%e4%bd%bf%e7%94%a8">8.5 关于 Chrome 使用</a></li>
<li><a href="#86-%e5%ae%88%e6%8a%a4%e8%bf%9b%e7%a8%8b">8.6 守护进程</a></li>
</ul></li>
<li><a href="#9-%e8%bf%90%e8%a1%8c%e9%97%ae%e9%a2%98">9 运行问题</a>

<ul>
<li><a href="#91-errsslversionorciphermismatch">9.1 ERR_SSL_VERSION_OR_CIPHER_MISMATCH</a></li>
</ul></li>
<li><a href="#10-%e5%8f%82%e8%80%83">10 参考</a></li>
</ul>

<h2 id="1-术语">1 术语</h2>

<table>
<thead>
<tr>
<th>缩写</th>
<th>定义</th>
<th>术语</th>
</tr>
</thead>

<tbody>
<tr>
<td>RTC</td>
<td>real-time communication</td>
<td>实时通信</td>
</tr>

<tr>
<td>W3C</td>
<td>world wide web consortium</td>
<td></td>
</tr>

<tr>
<td>SIP</td>
<td>session initiation protocol</td>
<td>会话初始协议</td>
</tr>

<tr>
<td>VoIP</td>
<td>voice over IP</td>
<td>网络电话</td>
</tr>

<tr>
<td>IMS</td>
<td>IP multimedia subsystem</td>
<td>多媒体子系统</td>
</tr>

<tr>
<td>LTE</td>
<td>long term evolution</td>
<td>长期演进技术</td>
</tr>

<tr>
<td>PSTN</td>
<td>public switched telephone networks</td>
<td>公共交换电话网</td>
</tr>

<tr>
<td>SMS</td>
<td>short message service</td>
<td>短信服务</td>
</tr>

<tr>
<td>ICE</td>
<td>Internet communication engine</td>
<td>互联网通讯引擎</td>
</tr>

<tr>
<td>DTLS</td>
<td>datagram transport layer security</td>
<td>数据报传输层安全</td>
</tr>

<tr>
<td>SRTP</td>
<td>secure real-time transport protocol</td>
<td>安全实时传输协议</td>
</tr>

<tr>
<td>AoR</td>
<td>address of record</td>
<td>地址记录</td>
</tr>

<tr>
<td>b2bua</td>
<td>back to back user agent</td>
<td>背对背用户代理</td>
</tr>

<tr>
<td>MTI</td>
<td>mandatory to implement</td>
<td>命令到实现</td>
</tr>

<tr>
<td>WSS</td>
<td>secure websocket</td>
<td>-</td>
</tr>

<tr>
<td>AMR</td>
<td>adaptive multi rate</td>
<td>自适应多速率</td>
</tr>

<tr>
<td>GSM</td>
<td>global system for mobile</td>
<td>全球移动通讯系统</td>
</tr>
</tbody>
</table>

<h2 id="2-webrtc2sip-架构">2 webrtc2sip 架构</h2>

<ul>
<li>HTML SIP 客户端：使用 <a href="https://www.doubango.org/sipml5/" target="_blank">sipML5</a> 实现</li>
<li>网关包括 4 个模块

<ul>
<li>SIP Proxy：把来自 WebSocket 的 SIP 传输转换成 UDP/TCP/TLS 等传统 SIP 网络支持的协议</li>
<li>如果后台服务支持通过 WebSocket 的 SIP 协议，可以跨过这个模块直接与客户端连接</li>
<li>如果使用 RTCWeb Breaker 或 Media Coder 模块，则建议使用此模块</li>
<li>RTCWeb Breaker</li>
<li>RTCWeb支持 ICE 和 DTLS/SRTP，而传统的 SIP 终端不支持</li>
<li>RTCWeb Breaker 转换媒体流以协商两种媒体方式</li>
<li>默认是不使用 RTCWeb Breaker，需要客户端再注册之前启用

<ul>
<li>在 URI 参数中包含&rdquo;rtcweb-breaker=true&rdquo;</li>
</ul></li>
<li>Media Coder</li>
<li>Chrome 使用 VP8 的视频编解码，Bowser 使用 H.264 AVC</li>
<li>Media Coder 使得可以在 Chrome 和 Bowser 直接建立视频会话</li>
<li>可使用 xml 配置文件启用 Media Coder，同时需要启用 RTCWeb breaker 模块</li>
<li>click-to-call service</li>
<li>基于其他三个模块的完整 SIP click-to-call 解决方案</li>
<li>允许通过一个链接直接打电话</li>
<li>包括 4 个组件

<ul>
<li>SMTP Client：为新注册的用户发送激活链接的邮件</li>
<li>HTTPS Server：交换浏览器和 click-to-call 服务之间的内容</li>
<li>Database connector：连接数据库的接口</li>
<li>JSON API：用于认证用户和管理用户账户</li>
</ul></li>
</ul></li>
</ul>

<h2 id="3-webrtc2sip-配置">3 webrtc2sip 配置</h2>

<ul>
<li>网关使用 <code>config.xml</code> 文件进行配置，和网关的运行目录相同</li>
</ul>

<h2 id="4-编译源码">4 编译源码</h2>

<ul>
<li><p>基于 CentOS 64，也可在 Linux，Windows 或 OS X 环境编译</p>

<pre><code class="language-sh"># 准备系统
sudo yum update
sudo yum install make libtool autoconf subversion git cvs wget libogg-devel gcc gcc-c++ pkgconfig
sudo yum install nasm
</code></pre></li>

<li><p>ubuntu 环境下错误</p>

<pre><code class="language-sh"># E: Unable to locate package libogg-devel
sudo apt-get install libogg-dev
# E: Unable to locate package gcc-c+
# E: Couldn't find any package by regex 'gcc-c+'
sudo apt-get install g++
# E: Unable to locate package pkgconfig
sudo apt-get install pkg-config
</code></pre></li>
</ul>

<h3 id="4-1-编译-doubango-ims-framework">4.1 编译 Doubango IMS Framework</h3>

<ul>
<li><p><a href="https://code.google.com/archive/p/doubango/" target="_blank">Doubango IMS Framework</a> 包含所有的信号协议(SIP/SDP/WebSocket 等)和媒体引擎(RTP 栈/音视频编解码)</p>

<pre><code class="language-sh"># 检出 Doubango 2.0 的源码
svn checkout https://doubango.googlecode.com/svn/branches/2.0/doubango doubango
</code></pre></li>

<li><p>ubuntu 环境下错误</p>

<pre><code class="language-sh"># svn: E170013: Unable to connect to a repository at URL 'https://doubango.googlecode.com/svn/branches/2.0/doubango'
# svn: E000110: Error running context: Connection timed out
wget https://storage.googleapis.com/google-code-archive-source/v2/code.google.com/webrtc2sip/source-archive.zip
## git 仓库没有 2.0 分支
##git clone https://github.com/DoubangoTelecom/doubango.git
</code></pre></li>
</ul>

<h4 id="4-1-1-编译-libsrtp">4.1.1 编译 libsrtp</h4>

<pre><code class="language-sh"># 源码编译安装
git clone https://github.com/cisco/libsrtp/
cd libsrtp
git checkout v1.5.0
CFLAGS=&quot;-fPIC&quot; ./configure --enable-pic &amp;&amp; make &amp;&amp; sudo make install
</code></pre>

<h4 id="4-1-2-编译-openssl">4.1.2 编译 OpenSSL</h4>

<ul>
<li>如果使用 RTCWeb Breaker 模块或者 WSS，需要 OpenSSL</li>

<li><p>如果需要支持 DTLS-SRTP，需要 OpenSSL 1.0.1 版本</p>

<pre><code class="language-sh"># 检查版本
openssl version
# 源码编译安装
wget http://www.openssl.org/source/openssl-1.0.1c.tar.gz
tar -xvzf openssl-1.0.1c.tar.gz
cd openssl-1.0.1c
./config shared --prefix=/usr/local --openssldir=/usr/local/openssl &amp;&amp; make &amp;&amp; sudo make install
</code></pre></li>

<li><p>编译错误</p>

<pre><code class="language-sh"># installing man1/cms.1
# cms.pod around line 457: Expected text after =item, not a number
# cms.pod around line 461: Expected text after =item, not a number
sudo make install_sw
</code></pre></li>
</ul>

<h4 id="4-1-3-编译-libspeex-和-libspeexdsp">4.1.3 编译 libspeex 和 libspeexdsp</h4>

<ul>
<li><p>libspeex(音频编解码) 和 libspeexdsp(音频处理和抖动缓冲区)是可选的，建议启用 libspeexdsp</p>

<pre><code class="language-sh"># 命令行安装 dev 包
sudo yum install speex-devel
# 源码编译安装
wget http://downloads.xiph.org/releases/speex/speex-1.2beta3.tar.gz
tar -xvzf speex-1.2beta3.tar.gz
cd speex-1.2beta3
./configure --disable-oggtest --without-libogg &amp;&amp; make &amp;&amp; sudo make install
</code></pre></li>

<li><p>ubuntu 环境</p>

<pre><code class="language-sh"># E: Unable to locate package speex-devel
sudo apt-get install libspeex-dev
sudo apt-get install libspeexdsp-dev
</code></pre></li>
</ul>

<h4 id="4-1-4-编译-yasm">4.1.4 编译 YASM</h4>

<ul>
<li><p>如果要使能 VPX(VP8 视频编解码) 或 x264(H.264 编解码)，需要 YASM</p>

<pre><code class="language-sh"># 源码编译安装
wget http://www.tortall.net/projects/yasm/releases/yasm-1.2.0.tar.gz
tar -xvzf yasm-1.2.0.tar.gz
cd yasm-1.2.0
./configure &amp;&amp; make &amp;&amp; sudo make install
</code></pre></li>
</ul>

<h4 id="4-1-5-编译-libvpx">4.1.5 编译 libvpx</h4>

<ul>
<li><p>libvpx 支持 VP8，是可选的，但是如果需要使用 Chrome 或 Firefox 的视频会话，推荐编译</p>

<pre><code class="language-sh"># 命令行安装 dev 包
sudo yum install libvpx-devel
# 源码编译安装
git clone http://git.chromium.org/webm/libvpx.git
cd libvpx
./configure --enable-realtime-only --enable-error-concealment --disable-examples --enable-vp8 --enable-pic --enable-shared --as=yasm
make &amp;&amp; make install
</code></pre></li>

<li><p>ubuntu 环境</p>

<pre><code class="language-sh"># E: Unable to locate package libvpx-devel
sudo apt-get install libvpx-dev
</code></pre></li>
</ul>

<h4 id="4-1-6-编译-linyuv">4.1.6 编译 linyuv</h4>

<ul>
<li><p>libyuv 可选，支持视频缩放和 chroma 转换</p>

<pre><code class="language-sh"># 源码编译安装
mkdir libyuv &amp;&amp; cd libyuv
svn co http://src.chromium.org/svn/trunk/tools/depot_tools .
./gclient config http://libyuv.googlecode.com/svn/trunk
./gclient sync &amp;&amp; cd trunk
make -j6 V=1 -r libyuv BUILDTYPE=Release
make -j6 V=1 -r libjpeg BUILDTYPE=Release
cp out/Release/obj.target/libyuv.a /usr/local/lib
cp out/Release/obj.target/third_party/libjpeg_turbo/libjpeg_turbo.a /usr/local/lib
mkdir --parents /usr/local/include/libyuv/libyuv
cp -rf include/libyuv.h /usr/local/include/libyuv
cp -rf include/libyuv/*.h /usr/local/include/libyuv/libyuv
</code></pre></li>

<li><p>svn 源码仓库克隆失败，跳过</p></li>

<li><p>查找到资料：<a href="https://chromium.googlesource.com/libyuv/libyuv/+/master/docs/getting_started.md" target="_blank">安装 libyuv</a></p></li>
</ul>

<h4 id="4-1-7-编译-opencore-amr">4.1.7 编译 opencore-amr</h4>

<ul>
<li><p>opencore-amr 可选，支持 AMR 音频编解码</p>

<pre><code class="language-sh"># 源码编译安装
git clone git://opencore-amr.git.sourceforge.net/gitroot/opencore-amr/opencore-amr
cd opencore-amr
autoreconf --install &amp;&amp; ./configure &amp;&amp; make &amp;&amp; sudo make install
</code></pre></li>
</ul>

<h4 id="4-1-8-编译-libopus">4.1.8 编译 libopus</h4>

<ul>
<li><p>libopus 是用于 WebRTC 的 MTI 编解码，可选但建议使用，支持 Opus 音频编解码</p>

<pre><code class="language-sh"># 源码编译安装
wget http://downloads.xiph.org/releases/opus/opus-1.0.2.tar.gz
tar -xvzf opus-1.0.2.tar.gz
cd opus-1.0.2
./configure --with-pic --enable-float-approx &amp;&amp; make &amp;&amp; sudo make install
</code></pre></li>
</ul>

<h4 id="4-1-9-编译-libgsm">4.1.9 编译 libgsm</h4>

<ul>
<li><p>libgsm 可选，支持 GSM 音频编解码</p>

<pre><code class="language-sh"># 命令行安装 dev 包(建议)
sudo yum install gsm-devel
# 源码编译安装
wget http://www.quut.com/gsm/gsm-1.0.13.tar.gz
tar -xvzf gsm-1.0.13.tar.gz
cd gsm-1.0-pl13 &amp;&amp; make &amp;&amp; make install
#cp -rf ./inc/* /usr/local/include
#cp -rf ./lib/* /usr/local/lib
</code></pre></li>

<li><p>ubuntu 环境</p>

<pre><code class="language-sh"># E: Unable to locate package gsm-devel
sudo apt-get install libgsm1-dev
</code></pre></li>
</ul>

<h4 id="4-1-10-编译-g729">4.1.10 编译 g729</h4>

<ul>
<li><p>G729 可选，支持 G.729 音频编解码</p>

<pre><code class="language-sh"># 源码编译安装
svn co http://g729.googlecode.com/svn/trunk/ g729b
cd g729b
./autogen.sh &amp;&amp; ./configure --enable-static --disable-shared &amp;&amp; make &amp;&amp; make install
</code></pre></li>

<li><p>svn 源码仓库克隆失败，跳过</p></li>
</ul>

<h4 id="4-1-11-编译-ilbc">4.1.11 编译 iLBC</h4>

<ul>
<li><p>iLBC 可选，支持 ILBC 音频编解码</p>

<pre><code class="language-sh"># 源码编译安装
svn co http://doubango.googlecode.com/svn/branches/2.0/doubango/thirdparties/scripts/ilbc
cd ilbc
wget http://www.ietf.org/rfc/rfc3951.txt
awk -f extract.awk rfc3951.txt
./autogen.sh &amp;&amp; ./configure
make &amp;&amp; make install
</code></pre></li>

<li><p>svn 源码仓库克隆失败，跳过</p></li>
</ul>

<h4 id="4-1-12-编译-x264">4.1.12 编译 x264</h4>

<ul>
<li><p>x264 可选，支持 H.264 视频编解码(要求有 FFMpeg)</p>

<pre><code class="language-sh"># 源码编译安装
wget ftp://ftp.videolan.org/pub/x264/snapshots/last_x264.tar.bz2
tar -xvjf last_x264.tar.bz2
# the output directory may be difference depending on the version and date
cd x264-snapshot-20121201-2245
./configure --enable-shared --enable-pic &amp;&amp; make &amp;&amp; sudo make install
</code></pre></li>

<li><p>ubuntu 环境</p>

<pre><code class="language-sh"># Found no assembler
# Minimum version is nasm-2.13
# If you really want to compile without asm, configure with --disable-asm.
</code></pre></li>
</ul>

<h4 id="4-1-13-编译-ffmpeg">4.1.13 编译 FFMpeg</h4>

<ul>
<li><p>FFMPeg 可选，支持 H.263，H.264(需要 x264) 和 MP4V-ES 视频编解码</p>

<pre><code class="language-sh"># 源码编译安装
git clone git://source.ffmpeg.org/ffmpeg.git ffmpeg
cd ffmpeg
# grap a release branch
git checkout n1.2
# configure source code
./configure \
--extra-cflags=&quot;-fPIC&quot; \
--extra-ldflags=&quot;-lpthread&quot; \
\
--enable-pic --enable-memalign-hack --enable-pthreads \
--enable-shared --disable-static \
--disable-network --enable-pthreads \
--disable-ffmpeg --disable-ffplay --disable-ffserver --disable-ffprobe \
\
--enable-gpl \
\
--disable-debug
# 加入 H.264 编码，在 configure 后添加 --enable-libx264
make &amp;&amp; sudo make install
</code></pre></li>
</ul>

<h4 id="4-1-14-编译-doubango">4.1.14 编译 Doubango</h4>

<pre><code class="language-sh"># 源码编译安装
## 最小化编译
cd doubango &amp;&amp; ./autogen.sh &amp;&amp; ./configure --with-ssl --with-srtp --with-speexdsp
make &amp;&amp; sudo make install
## 建议的编译
cd doubango &amp;&amp; ./autogen.sh &amp;&amp; ./configure --with-ssl --with-srtp --with-speexdsp --with-ffmpeg
make &amp;&amp; sudo make install
## 完整的编译
cd doubango &amp;&amp; ./autogen.sh &amp;&amp; ./configure --with-ssl --with-srtp --with-vpx --with-yuv
--with-amr --with-speex --with-speexdsp --with-gsm --with-ilbc --with-g729 --with-ffmpeg
make &amp;&amp; sudo make install
</code></pre>

<h3 id="4-2-编译-webrtc2sip-和第三方库">4.2 编译 webrtc2sip 和第三方库</h3>

<ul>
<li><p>webrtc2sip 依赖于 Doubango IMS Framework v2.0 和 libxml2</p>

<pre><code class="language-sh"># 检出源码
svn co http://webrtc2sip.googlecode.com/svn/trunk/ webrtc2sip
# 安装 libxml2
yum install libxml2-devel
# 编译 webrtc2sip
export PREFIX=/opt/webrtc2sip
cd webrtc2sip &amp;&amp; ./autogen.sh &amp;&amp; ./configure --prefix=$PREFIX
# ./configure --prefix=$PREFIX LDFLAGS='-ldl' LIBS='-ldl'
make clean &amp;&amp; make &amp;&amp; sudo make install
cp -f ./config.xml $PREFIX/sbin/config.xml
</code></pre></li>

<li><p>svn 源码仓库克隆失败，跳过</p></li>

<li><p>ubuntu 环境</p>

<pre><code class="language-sh">git clone https://github.com/DoubangoTelecom/webrtc2sip.git
sudo apt-get install libxml2-dev
</code></pre></li>
</ul>

<h3 id="4-3-运行-webrtc2sip">4.3 运行 webrtc2sip</h3>

<ul>
<li><p>需要有效的配置文件，默认的配置文件是与 <code>webrtc2sip</code> 同目录的 <code>config.xml</code></p>

<pre><code class="language-sh"># 执行二进制文件运行
webrtc2sip
</code></pre></li>
</ul>

<table>
<thead>
<tr>
<th>命令行参数</th>
<th>支持的版本</th>
<th>描述</th>
<th>示例</th>
</tr>
</thead>

<tbody>
<tr>
<td>&ndash;config=PATH</td>
<td>2.1.0</td>
<td>覆盖 <code>config.xml</code> 的默认路径</td>
<td>&ndash;config=/tmp/config.xml</td>
</tr>

<tr>
<td>&ndash;help</td>
<td>2.1.0</td>
<td>显示帮助信息</td>
<td>-</td>
</tr>

<tr>
<td>&ndash;version</td>
<td>2.1.0</td>
<td>显示网关版本</td>
<td>-</td>
</tr>
</tbody>
</table>

<ul>
<li><p>运行时错误</p>

<pre><code class="language-sh"># sqlite/mp_db_sqlite.cc&quot;
# line: &quot;51&quot;
# MSG: Failed to open SQLite database with error code = 14 and connectionInfo=./c2c_sqlite.db
# 在 webrtc2sip 所在文件夹执行语句，修改文件夹权限
sudo chown -R ubuntu:ubuntu ./
</code></pre></li>
</ul>

<h2 id="5-测试网关">5 测试网关</h2>

<ul>
<li>假定 webrtc2sip 运行在 192.168.0.1 机器，SIP 服务运行在 192.168.0.2 机器

<ul>
<li>在浏览器打开 <code>http://sipml5.org/expert.htm</code></li>
<li>在<code>WebSocket Server URL</code>区域填写 webrtc2sip 网关监听的 IP 和端口，比如<code>ws://192.168.0.1:10060</code>或<code>ws://192.168.0.1:10062</code>。注意不要忘记<code>ws://</code>或<code>wss://</code></li>
<li>在<code>SIP outbound Proxy URL</code>设置目的 IP 和端口，忽视域名，如<code>udp://192.168.0.2:5060</code></li>
<li>如果调用传统的 SIP 终端，检查<code>Enable RTCWeb Breaker</code>选项</li>
</ul></li>
</ul>

<h3 id="5-1-本地测试-sipml5-和-webrtc2sip">5.1 本地测试 sipML5 和 webrtc2sip</h3>

<ul>
<li>开启 sipML5 服务，使用<a href="https://www.npmjs.com/package/lite-server" target="_blank">lite_server</a>，网址默认<code>http://localhost:3000/</code></li>
<li>配置注册信息，具体值见下面的表格

<ul>
<li>假定 sipML5 服务运行在 192.168.1.140 机器</li>
<li>传统的 SIP 网关接收待认证的注册，用户编码是 34020000001110000001，密码是 12345678(默认)，端口是 5062(默认)</li>
</ul></li>
</ul>

<table>
<thead>
<tr>
<th>注册项</th>
<th>值</th>
<th>必填(Y/N)</th>
</tr>
</thead>

<tbody>
<tr>
<td>Display Name</td>
<td>test</td>
<td>N</td>
</tr>

<tr>
<td>Private Identity</td>
<td>34020000001110000001</td>
<td>Y</td>
</tr>

<tr>
<td>Public Identity</td>
<td>sip:34020000001110000001@192.168.1.140:5062</td>
<td>Y</td>
</tr>

<tr>
<td>Password</td>
<td>12345678</td>
<td>N</td>
</tr>

<tr>
<td>Realm</td>
<td>192.168.1.140</td>
<td>Y</td>
</tr>
</tbody>
</table>

<ul>
<li>配置<code>http://localhost:3000/</code>设置网关信息，具体值见下面的表格

<ul>
<li>假定传统的 SIP 服务运行在 192.168.1.140 机器，端口是 5060(默认)</li>
<li>假定 webrtc2sip 运行在 192.168.1.140 机器，端口是 10060(默认)</li>
</ul></li>
</ul>

<table>
<thead>
<tr>
<th>网关配置项</th>
<th>值</th>
</tr>
</thead>

<tbody>
<tr>
<td>WebSocket Server URL</td>
<td>ws://192.168.1.140:10060</td>
</tr>

<tr>
<td>SIP outbound Proxy URL</td>
<td>udp://192.168.1.140:5060</td>
</tr>
</tbody>
</table>

<ul>
<li>会话配置 phonenumber 为 34020000001310000001</li>
</ul>

<h2 id="6-互操作性">6 互操作性</h2>

<ul>
<li>建议使用 Chrome 的文档版本</li>
</ul>

<h3 id="6-1-关于服务">6.1 关于服务</h3>

<h4 id="6-1-1-asterisk">6.1.1 Asterisk</h4>

<ul>
<li>Asterisk 和 Chrome 在同时获得视频和音频时会有一些问题，解决方法有两种

<ul>
<li>使能 RTCWeb Breaker(建议)</li>
<li>Patching Asterisk：当作为开发者且正在尝试学习新特性时使用。但是 Asterisk 不支持 VP8。打补丁的<a href="https://code.google.com/archive/p/sipml5/wikis/Asterisk.wiki" target="_blank">教程参考</a></li>
</ul></li>
</ul>

<h4 id="6-1-2-freeswitch">6.1.2 FreeSwitch</h4>

<ul>
<li>FreeSwitch 不支持 ICE 和其他的 RTCWeb 特性</li>
<li>使能 RTCWeb Breaker 模块可以解决</li>
</ul>

<h3 id="6-2-关于-web-浏览器">6.2 关于 web 浏览器</h3>

<h4 id="6-2-1-chrome">6.2.1 Chrome</h4>

<ul>
<li>建议使用稳定版本</li>
<li>Chrome 使用 SAVPF 配置文件。S 即 secure(SRTP)，F 即 feedback。如果远端的 SIP 客户端/服务器不支持这些特性，需要使能 RTCWeb Breaker 模块（web 浏览器端）</li>
<li>Chrome 只包含 VP8 视频编解码，但是大多数 SIP 客户端/服务器不支持。如果 SIP 客户端/服务器 支持 H.264，H.263，The偶然 或 MP4V-ES，那么需要使能 RTCWeb Breaker 和 Media Coder 模块

<ul>
<li>注意：Media Coder 很可能在 sipml5.org 的服务上不能启用</li>
</ul></li>
</ul>

<h4 id="6-2-2-firefox-nightly">6.2.2 Firefox Nightly</h4>

<ul>
<li>目前只有 Firefox Nightly 原生支持 RTCWeb</li>
<li>关于 DTLS-SRTP 解码的 <a href="http://code.google.com/p/doubango/issues/detail?id=194" target="_blank">issue</a></li>
<li>Firefox Nightly 使用 DTLS-SRTP 实现 RTCWeb，Chrome 使用 SDES-SRTP，因此在两个浏览器之间会话需要使能 RTCWeb Breaker 模块</li>
</ul>

<h4 id="6-2-3-firefox-safari-ie-和-opera">6.2.3 Firefox，Safari，IE 和 Opera</h4>

<h4 id="6-2-4-ericsson-bowser">6.2.4 Ericsson Bowser</h4>

<ul>
<li>Ericsson Bowser 不支持 SRTP，且只有 H.264 视频编解码</li>
<li>Ericsson Bowser 可以与大部分 SIP 客户端通信，但是和 Canary 及其他 RTCWeb 客户端不兼容</li>
<li>使能 RTCWeb Breaker(浏览器端) 可以支持 Bowser 与 Chrome 音频会话，因为 G.711 是一个普遍的编解码。需要支持视频的话，需要使能 Media Coder(服务器端)</li>
</ul>

<h2 id="7-安全问题">7 安全问题</h2>

<ul>
<li>当在客户端(web 浏览器)使能 RTCWeb Breaker 模块，服务器会为所有到 web 浏览器收到的和传出去的 INVITE 请求承担 b2bua 的角色。这只适用于绑定到指定 web 浏览器的 SIP 账户</li>
<li>作为 b2bua 意味着为每个 INVITE 生成一个全新的请求。新的请求可能被远端的传统 SIP 网络认证，即 b2bua 必须持有 SIP 账户的鉴权信息</li>
</ul>

<h2 id="8-一些编译问题">8 一些编译问题</h2>

<h3 id="8-1-webrtc2sip-编译出错">8.1 webrtc2sip 编译出错</h3>

<pre><code class="language-sh"># Error: configure: error: Failed to find libtinyIPSec
export PKG_CONFIG_PATH=&quot;$PKG_CONFIG_PATH:/usr/local/lib/pkgconfig&quot;
# 编译 webrtc2sip
</code></pre>

<pre><code class="language-sh"># mp_object.h:23:23: fatal error: tsk_debug.h: No such file or directory
make -I/usr/local/include/tinysak/
</code></pre>

<pre><code class="language-sh"># /usr/bin/ld: webrtc2sip-sqlite3.o: undefined reference to symbol 'dlclose@@GLIBC_2.2.5'
# //lib/x86_64-linux-gnu/libdl.so.2: error adding symbols: DSO missing from command line
# collect2: error: ld returned 1 exit status
./configure --prefix=$PREFIX LDFLAGS='-ldl' LIBS='-ldl'
</code></pre>

<pre><code class="language-sh"># /usr/local/lib/libtinyNET.so: undefined reference to `CT_POLICY_EVAL_CTX_set1_cert'
# /usr/local/lib/libtinyNET.so: undefined reference to `X509_get0_pubkey'
# /usr/local/lib/libtinyNET.so: undefined reference to `SM2_compute_share_key'
# /usr/local/lib/libtinyNET.so: undefined reference to `CRYPTO_THREAD_write_lock'
# /usr/local/lib/libtinyNET.so: undefined reference to `OPENSSL_sk_insert
# 检查 Doubango，重新编译
</code></pre>

<h3 id="8-2-视频编解码崩溃">8.2 视频编解码崩溃</h3>

<ul>
<li>修改文件：<code>doubango/tinySAK/src/tsk_object.c</code>(199)</li>
<li>修改函数：<code>tsk_object_unref()</code></li>
<li>修改内容：将 <code>tsk_object_delete(self);</code> 替换为 <code>TSK_OBJECT_SAFE_FREE(self);</code></li>
</ul>

<h3 id="8-3-webrtc2sip-项目配置">8.3 webrtc2sip 项目配置</h3>

<ul>
<li><p>操作系统配置：局域网使用时，将 DNS 配置清空</p>

<pre><code class="language-sh">vim /etc/resolv.conf
# 注释掉下面的行
nameserver 172.17.192.21
</code></pre></li>

<li><p>FreeSwitch 添加 H264 编码支持</p>

<pre><code class="language-sh">vim freeswitch/conf/vars.xml
# &lt;X-PRE-PROCESS cmd=&quot;set&quot; data=&quot;global_codec_prefs=G722,PCMU,PCMA,GSM,H264&quot;/&gt;
# &lt;X-PRE-PROCESS cmd=&quot;set&quot; data=&quot;outbound_codec_prefs=PCMU,PCMA,GSM,H264&quot;/&gt;
</code></pre></li>
</ul>

<h3 id="8-4-关于-sipml5-服务">8.4 关于 sipML5 服务</h3>

<ul>
<li><a href="https://github.com/DoubangoTelecom/sipml5" target="_blank">源码地址</a></li>
<li>sipML5 服务连接失败，可能的原因和解决方案

<ul>
<li>根本原因是没有连接上 webrtc2sip 或 FreeSwitch 服务</li>
<li>可能原因1：网络中断。解决方法：恢复网络连接</li>
<li>可能原因2：Linux 的防火墙阻止了webrtc2sip 和 FreeSwitch 服务，关闭防火强可以解决此类问题</li>
</ul></li>
<li>Sipml5连接无反应，可能的原因及解决方案

<ul>
<li>可能的原因是 webrtc2sip 有问题，重新启动 webrtc2sip</li>
</ul></li>
<li>sipML5 与 Yealink 可视电话进行语音通话成功，但是视频通话呼叫方语音进入 echo 模式，视频不通，可能的原因及解决方案

<ul>
<li>可能是 webrtc2sip 的配置中<code>&lt;enable-media-coder&gt;no&lt;/enable-media-coder&gt;</code> 应该改成 yes</li>
</ul></li>
<li>webrtc2sip 启动自动退出，可能的原因及解决方案

<ul>
<li>可能是配置中所设置的本地 IP 地址与服务器的 IP 地址不一致造成的。修改 IP 地址可以解决此问题</li>
</ul></li>
</ul>

<h3 id="8-4-1-webrtc2sip-解析-sipml5-请求失败">8.4.1 webrtc2sip 解析 sipML5 请求失败</h3>

<ul>
<li><p>注册配置中<code>Realm</code>配置成编号，修改成 IP 地址</p>

<pre><code class="language-text">***[DOUBANGO ERROR]: function: &quot;tsip_message_parse()&quot;
file: &quot;src/parsers/tsip_parser_message.c&quot;
line: &quot;226&quot;
MSG: Failed to parse SIP message: /WS df7jal23ls0d.invalid;branch=z9hG4bKy6rW8Wp53Xb2ScABiUoaIJSmmfVGnfyi;rport
From: &quot;test&quot;&lt;sip:34020000001310000001@192.168.1.140:5062&gt;;tag=TvKDkETklspHcSTWievL
To: &quot;test&quot;&lt;sip:34020000001310000001@192.168.1.140:5062&gt;
Contact: &quot;test&quot;&lt;sip:34020000001310000001@df7jal23ls0d.invalid;rtcweb-breaker=yes;transport=ws&gt;;expires=200;click2call=no;+g.oma.sip-im;+audio;language=&quot;en,fr&quot;
Call-ID: 5b7f4bd8-b0c2-1511-b1f1-2360114685dd
CSeq: 31494 REGISTER
Content-Length: 0
Route: &lt;sip:192.168.1.140:5060;lr;sipml5-outbound;transport=udp&gt;
Max-Forwards: 70
User-Agent: IM-client/OMA1.0 sipML5-v1.2016.03.04
Organization: Doubango Telecom
Supported: path


***[DOUBANGO ERROR]: function: &quot;tsip_transport_layer_ws_cb()&quot;
file: &quot;src/transports/tsip_transport_layer.c&quot;
line: &quot;632&quot;
MSG: Failed to parse SIP message
</code></pre></li>
</ul>

<h3 id="8-5-关于-chrome-使用">8.5 关于 Chrome 使用</h3>

<ul>
<li>Chrome 浏览器呼叫时出现 “Media stream permission denied”

<ul>
<li>可能原因1：使用本地网页访问时容易出现这样的问题。请使用网址访问网站上的网页</li>
<li>可能原因2：如果是询问时禁止访问了麦克风和摄像头，请关闭 Chrome，重启</li>
<li>如果是 chrome for Android，到应用管理里，清除所有数据</li>
</ul></li>
<li>Chrome 浏览器主叫，被叫方隔很长时间才振铃

<ul>
<li>很有可能是 webrtc2sip 所在的服务器设置了 DNS，删除 DNS</li>
</ul></li>
</ul>

<h3 id="8-6-守护进程">8.6 守护进程</h3>

<ul>
<li>使用守护进程，当 webrtc2sip 服务崩溃时，自动重启该服务</li>
<li>使用进程守护者<a href="https://github.com/russells/process-monitor" target="_blank">process-monitor</a>

<ul>
<li>拷贝二进制文件 process-monitor 到 webrtc2sip 的 sbin 目录</li>
<li>执行命令 <code>./process-monitor webrtc2sip</code></li>
</ul></li>
</ul>

<h2 id="9-运行问题">9 运行问题</h2>

<h3 id="9-1-err-ssl-version-or-cipher-mismatch">9.1 ERR_SSL_VERSION_OR_CIPHER_MISMATCH</h3>

<ul>
<li>sipML5 报错：Error in connection establishment: net::ERR_SSL_VERSION_OR_CIPHER_MISMATCH</li>
<li>webrtc2sip 报错：Remote party requesting DTLS-DTLS (UDP/TLS/RTP/SAVPF) but this option is not enabled

<ul>
<li><a href="https://github.com/DoubangoTelecom/webrtc2sip/blob/master/FAQ.md#i-see-remote-party-requesting-dtls-dtls-udptlsrtpsavpf-but-this-option-is-not-enabled-how-can-i-fix-this" target="_blank">https://github.com/DoubangoTelecom/webrtc2sip/blob/master/FAQ.md#i-see-remote-party-requesting-dtls-dtls-udptlsrtpsavpf-but-this-option-is-not-enabled-how-can-i-fix-this</a></li>
<li><a href="https://stackoverflow.com/questions/36293964/dtls-dtls-is-not-enabled" target="_blank">https://stackoverflow.com/questions/36293964/dtls-dtls-is-not-enabled</a></li>
</ul></li>
</ul>

<h2 id="10-参考">10 参考</h2>

<ul>
<li><a href="https://code.google.com/archive/p/webrtc2sip/wikis/Building_Source_v2_0.wiki" target="_blank">webrtc2sip - Building_Source_v2_0.wiki</a></li>
<li><a href="https://doc.zeroc.com/ice/3.7/introduction" target="_blank">ice</a></li>
<li><a href="https://wiki.asterisk.org/wiki/display/AST/WebRTC+tutorial+using+SIPML5" target="_blank">WebRTC tutorial using SIPML5</a></li>
</ul>

    </div>

    





<div class="article-tags">
  
  <a class="badge badge-light" href="/tags/webrtc/">webrtc</a>
  
  <a class="badge badge-light" href="/tags/sip/">sip</a>
  
</div>



<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=https://xueqing.github.io/blog/webrtc/sip/webrtc2sip/&amp;text=webrtc2sip" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=https://xueqing.github.io/blog/webrtc/sip/webrtc2sip/&amp;t=webrtc2sip" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook-f"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=webrtc2sip&amp;body=https://xueqing.github.io/blog/webrtc/sip/webrtc2sip/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=https://xueqing.github.io/blog/webrtc/sip/webrtc2sip/&amp;title=webrtc2sip" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://web.whatsapp.com/send?text=webrtc2sip%20https://xueqing.github.io/blog/webrtc/sip/webrtc2sip/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=https://xueqing.github.io/blog/webrtc/sip/webrtc2sip/&amp;title=webrtc2sip" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>












  
  
    
  
  






  
  
  
  
  <div class="media author-card content-widget-hr">
    

    <div class="media-body">
      <h5 class="card-title"><a href="/authors/kiki/"></a></h5>
      
      
      <ul class="network-icon" aria-hidden="true">
  
</ul>

    </div>
  </div>









  
  
  <div class="article-widget content-widget-hr">
    <h3>相关</h3>
    <ul>
      
      <li><a href="/blog/webrtc/sip/sipml5/">sipML5</a></li>
      
      <li><a href="/blog/sip/authentication_authorization/">Authentication vs Authorization</a></li>
      
      <li><a href="/blog/sip/algo/sip_algorithm/">SIP 相关算法总结</a></li>
      
      <li><a href="/blog/sip/algo/sm2/">SM2</a></li>
      
      <li><a href="/blog/sip/algo/sm3/">SM3 密码杂凑算法</a></li>
      
    </ul>
  </div>
  



  </div>
</article>

      

    
    
    
    <script src="/js/mathjax-config.js"></script>
    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.3.1/mermaid.min.js" integrity="sha256-vOIuDSYDirTfyr+S2MjFnhOz6Rgiz4ODFAHATG0rFxw=" crossorigin="anonymous" title="mermaid"></script>
      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js" integrity="sha256-1zu+3BnLYV9LdiY85uXMzii3bdrkelyp37e0ZyTAQh0=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/languages/r.min.js"></script>
        
      

      
      
      <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    

    
    

    
    
    <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"没有找到结果","placeholder":"搜索...","results":"搜索结果"};
      const content_type = {
        'post': "文章",
        'project': "项目",
        'publication' : "出版物",
        'talk' : "演讲"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.d6bd04fdad2ad213aa8111c5a3b72fc5.js"></script>

    






  
  
  <div class="container">
    <footer class="site-footer">
  

  <p class="powered-by">
    

    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" class="back-to-top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">引用</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> 复制
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> 下载
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
